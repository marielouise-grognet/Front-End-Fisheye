const mediaList = [
    {
        id : 1,
        photographerId: 930,
        title: "Connected Curves",
        image : "assets/samplephotos-2/Ellie Rose/Architecture_Connected_Curves.jpg",
        likes: 12,
    },
{
    id : 2,
    photographerId:930,
    title: "Cross Bar",
    image: "assets/samplephotos-2/Ellie Rose/Architecture_Cross_Bar.jpg",
    likes: 45,
},
{
    id: 3,
    photographerId:930,
    title:"Horseshoe",
    image: "assets/samplephotos-2/Ellie Rose/Architecture_Horseshoe.jpg",
    likes :78,
},
{
    id:4,
    photographerId:930,
    title:"Water on Modern",
    image:"assets/samplephotos-2/Ellie Rose/Architecture_Water_on_Modern.jpg",
    likes:87,
},
{
    id:5,
    photographerId:930,
    title:"White Light",
    image:"assets/samplephotos-2/Ellie Rose/Architecture_White_Light.jpg",
    likes:57,
},
{
    id:6,
    photographerId:930,
    title:"Jump",
    image:"assets/samplephotos-2/Ellie Rose/Sport_Jump.jpg",
    likes:48,
},
{
    id:7,
    photographerId:930,
    title:"Next Hold",
    image:"assets/samplephotos-2/Ellie Rose/Sport_Next_Hold.jpg",
    likes:89,
},
{
    id:8,
    photographerId:930,
    title:"Race End",
    image:"assets/samplephotos-2/Ellie Rose/Sport_Race_End.jpg",
    likes:48,
},
{
    id:9,
    photographerId:930,
    title:"Sky Cross",
    image:"assets/samplephotos-2/Ellie Rose/Sport_Sky_Cross.jpg",
    likes:84,
},
{
    id:10,
    photographerId:930,
    title:"Tricks in the air",
    video:"assets/samplephotos-2/Ellie Rose/Sport_Tricks_in_the_air.mp4",
    likes:48,
},
{
    id:11,
    photographerId:930,
    title:"Water tunnel",
    image:"assets/samplephotos-2/Ellie Rose/sport_water_tunnel.jpg",
    likes:57,
},
{
    id:12,
    photographerId:195,
    title:"Corner Room",
    image:"assets/samplephotos-2/Marcel/Architecture_Corner_Room.jpg",
    likes:39,
},
{
    id:13,
    photographerId:195,
    title:"Cover circle empty highway in Buenos Aires.mp4",
    video:"assets/samplephotos-2/Marcel/Architecture_coverr_circle_empty_highway_in_buenos_aires_587740985637.mp4",
    likes:39,
},
{
    id:14,
    photographerId:195,
    title:"Dome",
    image:"assets/samplephotos-2/Marcel/Architecture_Dome.jpg",
    likes:48,
},
{
    id:15,
    photographerId:195,
    title:"On a hill",
    image:"assets/samplephotos-2/Marcel/Architecture_On_a_hill.jpg",
    likes:95,
},
{
    id:16,
    photographerId:195,
    title:"Contrast",
    image:"assets/samplephotos-2/Marcel/Architecure_Contrast.jpg",
    likes:174,
},
{
    id:17,
    photographerId:195,
    title:"Adventure Door",
    image:"assets/samplephotos-2/Marcel/Travel _Adventure_Door.jpg",
    likes:68,
},
{
    id:18,
    photographerId:195,
    title:"Bike and Stair",
    image:"assets/samplephotos-2/Marcel/Travel_Bike_and_Stair.jpg",
    likes:39,
},
{
    id:19,
    photographerId:195,
    title:"Open Mountain",
    image:"assets/samplephotos-2/Marcel/Travel_OpenMountain.jpg",
    likes:346,
},
{
    id:20,
    photographerId:195,
    title:"Sunset on Canals",
    image:"assets/samplephotos-2/Marcel/Travel_SunsetonCanals.jpg",
    likes:68,
},
{
    id:21,
    photographerId:195,
    title:"Tower",
    image:"assets/samplephotos-2/Marcel/Travel_Tower.jpg",
    likes:89,
},
{
    id:22,
    photographerId:243,
    title:"Rainbow",
    image:"assets/samplephotos-2/Mimi/Animals_Rainbow.jpg",
    likes:89,
},
{
    id:23,
    photographerId:243,
    title:"Wild Horses in the mountains",
    video:"assets/samplephotos-2/Mimi/Animals_Wild_Horses_in_the_mountains.mp4",
    likes:790,
},
{
    id:24,
    photographerId:243,
    title:"Benevides Wedding",
    image:"assets/samplephotos-2/Mimi/Event_BenevidesWedding.jpg",
    likes:469,
},
{
    id:25,
    photographerId:243,
    title:"Pinto Wedding",
    image:"assets/samplephotos-2/Mimi/Event_PintoWedding.jpg",
    likes:123,
},
{
    id:26,
    photographerId:243,
    title:"Seaside Wedding",
    image:"assets/samplephotos-2/Mimi/Event_SeasideWedding.jpg",
    likes:321,
},
{
    id:27,
    photographerId:243,
    title:"Background",
    image:"assets/samplephotos-2/Mimi/Portrait_Background.jpg",
    likes:34,
},
{
    id:28,
    photographerId:243,
    title:"Nora",
    image:"assets/samplephotos-2/Mimi/Portrait_Nora.jpg",
    likes:578,
},
{
    id:29,
    photographerId:243,
    title:"Wednesday",
    image:"assets/samplephotos-2/Mimi/Portrait_Wednesday.jpg",
    likes:578,
},
{
    id:30,
    photographerId:243,
    title:"Hillside Color",
    image:"assets/samplephotos-2/Mimi/Travel_HillsideColor.jpg",
    likes:234,
},
{
    id:31,
    photographerId:243,
    title:"Lonesome",
    image:"assets/samplephotos-2/Mimi/Travel_Lonesome.jpg",
    likes:65,
},
{
    id:32,
    photographerId:527,
    title:"Afternoon Break",
    image:"assets/samplephotos-2/Nabeel/Portrait_AfternoonBreak.jpg",
    likes:65,
},
{
    id:33,
    photographerId:527,
    title:"Alexandra",
    image:"assets/samplephotos-2/Nabeel/Portrait_Alexandra.jpg",
    likes:789,
},
{
    id:34,
    photographerId:527,
    title:"Shaw",
    image:"assets/samplephotos-2/Nabeel/Portrait_Shaw.jpg",
    likes:79,
},
{
    id:35,
    photographerId:527,
    title:"Sunkissed",
    image:"assets/samplephotos-2/Nabeel/Portrait_Sunkissed.jpg",
    likes:987,
},
{
    id:36,
    photographerId:527,
    title:"Boat Wanderer",
    image:"assets/samplephotos-2/Nabeel/Travel_Boat_Wanderer.jpg",
    likes:65,
},
{
    id:37,
    photographerId:527,
    title:"Bridge into Forest",
    image:"assets/samplephotos-2/Nabeel/Travel_Bridge_into_Forest.jpg",
    likes:789,
},
{
    id:38,
    photographerId:527,
    title:"On the Road",
    image:"assets/samplephotos-2/Nabeel/Travel_On_the_Road.jpg",
    likes:876,
},
{
    id:39,
    photographerId:527,
    title:"Outdoor Baths",
    image:"assets/samplephotos-2/Nabeel/Travel_Outdoor_Baths.jpg",
    likes:123,
},
{
    id:40,
    photographerId:527,
    title:"Road into Hill",
    image:"assets/samplephotos-2/Nabeel/Travel_Road_into_Hill.jpg",
    likes:789,
},
{
    id:41,
    photographerId:527,
    title:"Bridge into Forest",
    video:"assets/samplephotos-2/Nabeel/Travel_Rock_Mountains.mp4",
    likes:789,
},
{
    id:42,
    photographerId:925,
    title:"Majesty",
    image:"assets/samplephotos-2/Rhode/Animals_Majesty.jpg",
    likes:789,
},
{
    id:43,
    photographerId:925,
    title:"Puppiness",
    video:"assets/samplephotos-2/Rhode/Animals_Puppiness.mp4",
    likes:233,
},
{
    id:44,
    photographerId:925,
    title:"Emcee",
    image:"assets/samplephotos-2/Rhode/Event_KeyboardCheck.jpg",
    likes:654,
},
{
    id:45,
    photographerId:925,
    title:"Product Pitch",
    image:"assets/samplephotos-2/Rhode/Event_ProductPitch.jpg",
    likes:67,
},
{
    id:46,
    photographerId:925,
    title:"Venture Conference",
    image:"assets/samplephotos-2/Rhode/Event_VentureConference.jpg",
    likes:76,
},
{
    id:47,
    photographerId:925,
    title:"Majesty",
    image:"assets/samplephotos-2/Rhode/Animals_Majesty.jpg",
    likes:789,
},
{
    id:48,
    photographerId:925,
    title:"Melody Red on Stripes",
    image:"assets/samplephotos-2/Rhode/Fashion_Melody_Red_on_Stripes.jpg",
    likes:12,
},
{
    id:49,
    photographerId:925,
    title:"Wings",
    image:"assets/samplephotos-2/Rhode/Fashion_Wings.jpg",
    likes:789,
},
{
    id:50,
    photographerId:925,
    title:"2000 with 8",
    image:"assets/samplephotos-2/Rhode/Sport_2000_with_8.jpg",
    likes:78,
},
{
    id:51,
    photographerId:925,
    title:"Butterfly",
    image:"assets/samplephotos-2/Rhode/Sport_Butterfly.jpg",
    likes:73,
},
{
    id:52,
    photographerId:82,
    title:"Mine",
    image:"assets/samplephotos-2/Tracy/Art_Mine.jpg",
    likes:789,
},
{
    id:53,
    photographerId:82,
    title:"Purple light",
    image:"assets/samplephotos-2/Tracy/Art_Purple_light.jpg",
    likes:78,
},
{
    id:54,
    photographerId:82,
    title:"Triangle Man",
    image:"assets/samplephotos-2/Tracy/Art_Triangle_Man.jpg",
    likes:876,
},
{
    id:55,
    photographerId:82,
    title:"Wooden Horse Sculpture",
    video:"assets/samplephotos-2/Tracy/Art_Wooden_Horse_Sculpture.mp4",
    likes:123,
},
{
    id:56,
    photographerId:82,
    title:"18th Anniversary",
    image:"assets/samplephotos-2/Tracy/Event_18thAnniversary.jpg",
    likes:87,
},
{
    id:57,
    photographerId:82,
    title:"Sparklers",
    image:"assets/samplephotos-2/Tracy/Event_Sparklers.jpg",
    likes:789,
},
{
    id:58,
    photographerId:82,
    title:"Wedding Gazebo",
    image:"assets/samplephotos-2/Tracy/Event_WeddingGazebo.jpg",
    likes:873,
},
{
    id:59,
    photographerId:82,
    title:"Pattern on Pattern",
    image:"assets/samplephotos-2/Tracy/Fashion_Pattern_on_Pattern.jpg",
    likes:23,
},
{
    id:60,
    photographerId:82,
    title:"Urban Jungle",
    image:"assets/samplephotos-2/Tracy/Fashion_Urban_Jungle.jpg",
    likes:789,
},
{
    id:61,
    photographerId:82,
    title:"Yellow Beach",
    image:"assets/samplephotos-2/Tracy/Fashion_Yellow_Beach.jpg",
    likes:789,
}
]

function mediaFactory(media) {
    function getMediaCardDOM() {
      const article = document.createElement("article");
      article.classList.add("media-card");

      let mediaElement;

      if (media.video) {
        mediaElement = document.createElement("video");
        mediaElement.src = media.video;
        mediaElement.setAttribute("controls", true);
        mediaElement.setAttribute("aria-label", media.title);
      } else if (media.image) {
        mediaElement = document.createElement("img");
        mediaElement.src = media.image;
        mediaElement.alt = media.title;
      }
      const title = document.createElement("h3");
      title.textContent = media.title;
  
      const likes = document.createElement("span");
      likes.textContent = `${media.likes} ❤`;

      const titleLikes = document.createElement("div")
      titleLikes.classList.add(`titleLikes`)
  
      article.appendChild(mediaElement);
      article.appendChild(titleLikes)
      titleLikes.appendChild(title);
      titleLikes.appendChild(likes);
  
      return article;
    }
  
    return { getMediaCardDOM };
  }
  


// 1. Récupérer l’ID du photographe depuis l’URL
const params = new URLSearchParams(window.location.search);
const photographerId = parseInt(params.get("id")); // exemple : ?id=930

// 2. Filtrer les médias pour ce photographe
const filteredMedia = mediaList.filter(media => media.photographerId === photographerId);

// 3. Afficher uniquement les médias filtrés
const container = document.querySelector(".media-gallery");

filteredMedia.forEach((media) => {
    const mediaModel = mediaFactory(media);
    const mediaCard = mediaModel.getMediaCardDOM();
    container.appendChild(mediaCard);
});

// 4. Calculer le total de likes pour ce photographe
const totalLikes = filteredMedia.reduce((sum, media) => sum + media.likes, 0);
console.log("Total des likes du photographe :", totalLikes);
const totalLikesElement = document.createElement("div");
totalLikesElement.classList.add(`totalLikes`);
totalLikesElement.textContent = `${totalLikes} ❤`;
const fixedWidget = document.querySelector(".fixedWidget")
fixedWidget.appendChild(totalLikesElement)

// 5. Afficher le prix journalier pour ce photographe
async function displayPhotographerPrice() {
    const { photographer } = await getPhotographer(); // réutilise la même fonction que dans ton autre fichier
    const pricePerDay = photographer.price;

    const priceElement = document.createElement("div");
    priceElement.classList.add("dayPrice");
    priceElement.textContent = `${pricePerDay}€/jour`;

    const fixedWidget = document.querySelector(".fixedWidget");
    fixedWidget.appendChild(priceElement);
}

displayPhotographerPrice();
